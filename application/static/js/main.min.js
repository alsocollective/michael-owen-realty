var app={options:{loadingpage:!1,pagetransitiontime:1e3},init:function(){$("nav a").click(app.nav.navmenueclick),app.url.gotohashlocation(),$("#navbutton").click(app.nav.togglemenue),app.url.setupPagescroll(".mainwrapper"),app.resize(),$(window).resize(app.resize),$(window).on("hashchange",function(){console.log("hash changed")})},nav:{navmenueclick:function(a){if(!this.href||!a.preventDefault)return!1;var b=this.href,c=b.split(":")[0];return"mailto"!=c&&"tel"!=c?app.options.loadingpage?(a.preventDefault(),!1):(app.options.loadingpage=!0,app.nav.loadpage(this.href),$("#navbutton").hasClass("navactive")&&app.nav.togglemenue(),!1):void 0},loadpage:function(a){app.url.seturlfromfull(a),a=app.url.addajax(a);var b=document.createElement("div");b.className="mainwrapper offright",document.body.appendChild(b),$(b).load(a,function(){$.waypoints("destroy");var a=$(".mainwrapper"),b=$(a[0]),c=$(a[1]);b.addClass("offleft"),c.removeClass("offright"),app.nav.deleteEl(b[0],app.options.pagetransitiontime)})},deleteEl:function(a,b){setTimeout(function(){app.options.loadingpage=!1,a.parentNode.removeChild(a),app.url.setupPagescroll(".mainwrapper")},b)},togglemenue:function(){$("nav").toggleClass("offleft"),$("#navbutton").toggleClass("navactive")},changeurl:function(a){$(".currentpage").removeClass("currentpage"),$($('a[href="'+a+'"]')[0].parentNode).addClass("currentpage")},correctSize:function(){$("#nav").width($($(".mainwrapper div")[0]).width())}},url:{seturlfromfull:function(a){var a=a.split("/");a="/"+a[a.length-1],window.history.pushState("","",a),app.nav.changeurl(a)},addajax:function(a){var b=a.split("/");return""==b[b.length-1]&&(b[b.length-1]="home"),b[b.length-1]="ajax"+b[b.length-1],b.join("/")},setupPagescroll:function(a){var b=$(a+" h2");b.waypoint(app.url.setSectionAsHash,{context:".mainwrapper"})},setSectionAsHash:function(){location.hash=app.url.slugify(this.innerHTML)},slugify:function(a){return a.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")},gotohashlocation:function(){$(location.hash)}},about:{init:function(){$(".reference").slick({dots:!0,arrows:!1}),app.property.setup()}},search:{init:function(){app.search.setuppriceSlider(),app.search.setupBedSlider(),app.search.setupBathSlider(),app.property.setup()},setuppriceSlider:function(){var a=$(".offright #priceslider");0==a.length&&(a=$("#priceslider")),a.noUiSlider({start:[0,4e5],connect:!0,behaviour:"drag",range:{min:[0],max:[15e5]},format:wNumb({mark:".",decimals:0,thousand:",",prefix:"$ "}),step:1e4}),a.Link("lower").to($("#lowerprice")),a.Link("upper").to($("#upperprice"))},setupBedSlider:function(){var a=$(".offright #bedslider");0==a.length&&(a=$("#bedslider")),a.noUiSlider({start:[1,3],connect:!0,behaviour:"drag",range:{min:[1],max:[10]},format:wNumb({mark:".",decimals:0}),step:1}),a.Link("lower").to($("#lowerbed")),a.Link("upper").to($("#upperbed"))},setupBathSlider:function(){var a=$(".offright #bathslider");0==a.length&&(a=$("#bathslider")),a.noUiSlider({start:[1,3],connect:!0,behaviour:"drag",range:{min:[1],max:[10]},format:wNumb({mark:".",decimals:1}),step:.5}),a.Link("lower").to($("#lowerbath")),a.Link("upper").to($("#upperbath"))}},sell:{init:function(){console.log("sell setting up")}},property:{init:function(){$(".propertyimages").slick({dots:!0,arrows:!1}),$(".module").click(app.property.delete)},"delete":function(){console.log(this),this.parentNode.removeChild(this)},setup:function(){$(".propertylist li").click(app.property.loadproperty)},loadproperty:function(){if(app.options.loadingpage)return console.log("already loading page"),!1;var a=document.createElement("div");a.className="module",document.body.appendChild(a),$(a).load("ajaxproperty",app.property.loadedproperty)},loadedproperty:function(){app.property.init()}},resize:function(){app.nav.correctSize()}};